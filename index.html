<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self' https: wss:; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; connect-src 'self' https: wss: https://proxy.cors.sh/;"
    /-->
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>비트코인 좋게보이너</title>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css"
    />

    <script src="https://cdn.jsdelivr.net/npm/ethers@6.13.5/dist/ethers.umd.min.js"></script>

    <meta
      name="description"
      content="실시간 비트코인 시세 및 김치프리미엄 모니터링"
    />
    <meta name="theme-color" content="#0f172a" />
    <link rel="icon" type="image/png" href="favicon.png" />
  </head>
  <body>
    <div class="container">
      <header>
        <div class="header-content">
          <div class="logo">
            <i class="fab fa-bitcoin"></i>
            <h1>비트코인 좋게보이너</h1>
          </div>
          <div class="developer-link">
            개발자 𝕏:
            <a href="https://x.com/Krrkyakya" target="_blank">@Krrkyakya, </a>
            <a href="https://x.com/RealSatoshiNa" target="_blank"
              >@RealSatoshiNa</a
            >
          </div>
        </div>
      </header>
      <div class="swipe-hint">
        <i class="fas fa-arrow-right"></i>
        옆으로 스와이프하세요
      </div>
      <br />

      <main>
        <div class="content-grid">
          <div class="price-section">
            <h2 class="section-title">
              <i class="fas fa-chart-line"></i>
              현재 가격
            </h2>
            <div class="price-cards">
              <div class="price-card">
                <div class="exchange-name">BINANCE</div>
                <div class="price-content">
                  <div id="binance-price" class="price-value">로딩 중...</div>
                  <div class="currency">USD</div>
                </div>
                <div class="price-details">
                  <div class="detail-item">
                    <i class="fas fa-arrow-trend-up"></i>
                    <span id="binance-24h-high">로딩 중...</span>
                  </div>
                  <div class="detail-item">
                    <i class="fas fa-arrow-trend-down"></i>
                    <span id="binance-24h-low">로딩 중...</span>
                  </div>
                  <div class="detail-item">
                    <i class="fas fa-chart-line"></i>
                    <span id="binance-24h-volume">로딩 중...</span>
                  </div>
                </div>
              </div>
              <div class="price-card">
                <div class="exchange-name">UPBIT</div>
                <div class="price-content">
                  <div id="upbit-price" class="price-value">로딩 중...</div>
                  <div class="currency">KRW</div>
                </div>
                <div class="price-details">
                  <div class="detail-item">
                    <i class="fas fa-arrow-trend-up"></i>
                    <span id="upbit-24h-high">로딩 중...</span>
                  </div>
                  <div class="detail-item">
                    <i class="fas fa-arrow-trend-down"></i>
                    <span id="upbit-24h-low">로딩 중...</span>
                  </div>
                  <div class="detail-item">
                    <i class="fas fa-chart-line"></i>
                    <span id="upbit-24h-volume">로딩 중...</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="right-section">
            <div class="satoshi-card">
              <div class="info-title">
                <i class="fas fa-dollar-sign"></i>
                1 SAT/USD
              </div>
              <div id="satoshi-usd" class="info-value">로딩 중...</div>
            </div>
            <div class="satoshi-card">
              <div class="info-title">
                <i class="fas fa-won-sign"></i>
                1 SAT/KRW
              </div>
              <div id="satoshi-krw" class="info-value">로딩 중...</div>
            </div>
            <div class="satoshi-card">
              <div class="info-title">
                <i class="fas fa-exchange-alt"></i>
                환율 (USD/KRW)
              </div>
              <div id="exchange-rate" class="info-value">로딩 중...</div>
            </div>
            <div class="satoshi-card">
              <div class="info-title">
                <i class="fas fa-percentage"></i>
                김치프리미엄
              </div>
              <div id="kimchi-premium" class="info-value">로딩 중...</div>
            </div>
            <div class="satoshi-card">
              <div class="info-title">
                <i class="fas fa-chart-pie"></i>
                공포/탐욕 지수
              </div>
              <div id="fear-greed" class="info-value">로딩 중...</div>
            </div>
          </div>
        </div>
        <br />

        <div class="mining-section">
          <div class="mining-info">
            <h2 class="section-title">
              <i class="fas fa-coins"></i>
              채굴 현황
            </h2>
            <br />
            <div class="mining-cards">
              <div class="mining-card">
                <div class="info-title">비트코인 블록</div>
                <div id="btc-height" class="info-value">로딩 중...</div>
              </div>
              <div class="mining-card">
                <div class="info-title">비트코인 수수료율 ( 전송시 )</div>
                <div id="btc-fees" class="info-value">로딩 중...</div>
              </div>
              <div class="mining-card">
                <div class="info-title">채굴된 비트코인</div>
                <div id="btc-mined" class="info-value">로딩 중...</div>
              </div>
              <div class="mining-card">
                <div class="info-title">남은 채굴량</div>
                <div id="btc-remaining" class="info-value">로딩 중...</div>
              </div>
              <div class="mining-card">
                <div class="info-title">인플레이션 ( 채굴 보상 )</div>
                <div id="btc-inflation" class="info-value">로딩 중...</div>
              </div>
            </div>
          </div>
        </div>

        <div class="mining-section">
          <div class="mining-info">
            <h2 class="section-title">
              <i class="fas fa-ranking-star"></i>
              비트코인 순위 확인 (임시 기능: 2024년 2월 기반)
            </h2>
            <div class="ranking-form">
              <div class="input-group">
                <input
                  type="number"
                  id="btc-amount"
                  step="0.00000001"
                  min="0"
                  placeholder="보유 중인 비트코인 수량을 입력하세요"
                />
                <button onclick="checkRanking()">순위 확인</button>
              </div>
              <div class="ranking-result">
                <div class="mining-cards">
                  <div class="mining-card">
                    <div class="info-title">상위 퍼센트</div>
                    <div id="btc-percent" class="info-value">-</div>
                  </div>
                  <div class="mining-card">
                    <div class="info-title">전체 순위</div>
                    <div id="btc-rank" class="info-value">-</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="chart-container">
          <section class="chart">
            <h2>가격 차트</h2>
            <!-- TradingView Widget BEGIN -->
            <div class="tradingview-widget-container">
              <div id="tradingview_btc"></div>
              <script
                type="text/javascript"
                src="https://s3.tradingview.com/tv.js"
              ></script>
              <script type="text/javascript">
                new TradingView.widget({
                  width: "100%",
                  height: "100%",
                  symbol: "BINANCE:BTCUSDT",
                  interval: "D",
                  timezone: "Asia/Seoul",
                  theme: "dark",
                  style: "1",
                  locale: "kr",
                  toolbar_bg: "#f1f3f6",
                  enable_publishing: false,
                  hide_side_toolbar: false,
                  allow_symbol_change: true,
                  container_id: "tradingview_btc",
                  studies: ["MASimple@tv-basicstudies"],
                  show_popup_button: false,
                  popup_width: "1000",
                  popup_height: "650",
                  hide_volume: false,
                  backgroundColor: "#1e222d",
                  gridColor: "#2a2e39",
                  library_path: "charting_library/",
                  custom_css_url: "./style.css",
                });
              </script>
            </div>
            <!-- TradingView Widget END -->
          </section>

          <section class="chart">
            <h2>비트코인 도미넌스</h2>
            <!-- TradingView 도미넌스 차트 위젯 -->
            <div class="tradingview-widget-container">
              <div id="tradingview_dominance"></div>
              <script type="text/javascript">
                new TradingView.widget({
                  width: "100%",
                  height: "100%",
                  symbol: "CRYPTOCAP:BTC.D",
                  interval: "D",
                  timezone: "Asia/Seoul",
                  theme: "dark",
                  style: "1",
                  locale: "kr",
                  toolbar_bg: "#f1f3f6",
                  enable_publishing: false,
                  hide_side_toolbar: false,
                  allow_symbol_change: true,
                  container_id: "tradingview_dominance",
                  show_popup_button: false,
                  popup_width: "1000",
                  popup_height: "650",
                  hide_volume: false,
                  backgroundColor: "#1e222d",
                  gridColor: "#2a2e39",
                });
              </script>
            </div>
          </section>
        </div>
      </main>
    </div>

    <script src="script.js"></script>
  </body>
</html>
